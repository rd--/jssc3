<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="png/os.512.png" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/aaaakshat/cm-web-fonts@latest/fonts.css" />
    <link href="lib/quill/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="all" href="css/sc3.css" />
    <link rel="stylesheet" type="text/css" media="all" href="css/sc3-rte.css" />
    <script src="lib/osc.js/dist/osc-browser.js"></script>
    <script src="lib/quill/quill.js"></script>
    <script type="module">
import * as sc from './js/jssc3.js'
import { sc3_superscript_init } from './js/superscript.js'
globalThis.sc = sc;
window.onload = function () {
    sc.sc3_wasm_init(sc.setStatusDisplay);
    sc.sc3_ui_init(globalScsynth, {
	subDir: '',
	hasProgramMenu: false,
	hasHelpMenu: false,
	hasGuideMenu: false,
	hasEssayMenu: true,
	fileExt: '.html',
	storageKey: 'jssc3UserPrograms/html',
	loadProc: sc.graph_load,
	initWasm: true,
	hardwareBufferSize: 4096,
	blockSize: 48
    });
    sc3_superscript_init(sc.editor);
    sc.jssc3_init('e', 'help/essay/jssc3-1.html', null);
};
    </script>
  </head>
  <body>
    <h1>SuperScipt</h1>
    <div>
      <div id="text_editor"></div>
    </div>
    <div id="jssc3Menu">
      <select id="essayMenu" title="Essay (y)" accesskey="y"></select>
      <select id="userMenu" title="User (u)" accesskey="u"><option value="">--User--</option></select>
    </div>
    <div>
      <input type="file" id="programInputFile" accept=".html" onchange="sc.jssc3_read_input_program()" style="display:none">
      <button id="programInputFileSelect" title="Select and load  file to editor (l)" accesskey="l">Load</button>
      <button title="Copy document to clipboard (c)" accesskey="c" onclick="navigator.clipboard.writeText(sc.editor.get_data())">Copy</button>
      <button title="Evaluate program (/)" accesskey="/" onclick="sc.evalJsProgram()">Eval</button>
      <button title="Play (,)" accesskey="," onclick="sc.playJsProgram(globalScsynth, 0)">Play</button>
      <button title="Reset (.)" accesskey="." onclick="sc.resetScsynth(globalScsynth)">Reset</button>
      <button title="Save document to local storage (s)" accesskey="s" onclick="sc.ui_save_program()">Save</button>
      <button title="Print" onclick="sc.prettyPrintSyndef()">Print</button>
      <select id="notationFormat" title="Notation format" onchange="sc.set_notation_format()">
        <option value=".stc" accesskey="t">.stc</option>
        <option value=".js" accesskey="j">.js</option>
      </select>
      <select id="actionsMenu" title="Actions">
        <option value="">&#x2630;</option>
        <option value='setBlockSize'>Block Size</option>
        <option value='setNumInputs'>Input Channels</option>
        <option value="userBackup" title="Save user programs to archive">Backup</option>
        <option value="userRestore" title="Load user programs from archive">Restore</option>
        <option value="userPurge" title="Delete all user programs">Purge</option>
        <option value="documentVisit" title="Visit document named in selected text (v)" accesskey="v">Visit</option>
      </select>
      <button title="Boot" accesskey="b" onclick="globalScsynth.boot()">‚èª (Boot)</button>
      <span id="statusText"></span>
    </div>
    <script src="lib/quill/quill.js"></script>
    <script async src="lib/scsynth-wasm-builds/ext/scsynth.js"></script>
  </body>
</html>
